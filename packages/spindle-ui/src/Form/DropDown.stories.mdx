import { Meta, Story, Source, Description } from '@storybook/addon-docs/blocks';
import { actions } from '@storybook/addon-actions';
import { DropDown } from './DropDown';

# DropDown

<Meta title="Form/DropDown" component={DropDown} />

<Source
  language='javascript'
  code={`
import { DropDown } from '@openameba/spindle-ui/Form';
import '@openameba/spindle-ui/Form/DropDown.css';
  `}
/>

<Source
  language='css'
  code={`@import './node_modules/@openameba/spindle-ui/Form/DropDown.css'`}
/>

<Source
  language='html'
  code={`<link rel="stylesheet" href="https://unpkg.com/@openameba/spindle-ui/Form/DropDown.css">`}
/>

<Description>このコンポーネントの利用にはJavaScriptでの処理が必要なため、HTMLのみでは正常に動作しません。[React版](https://github.com/openameba/spindle/tree/main/packages/spindle-ui/src/Form/DropDown.tsx)を参考に実装してください。</Description>

## DropDown

<Preview withSource="open">
  <Story name="DropDown">
    <DropDown aria-label="期間を選択" name="term" {...actions('onClick', 'onChange', 'onInput', 'onFocus', 'onBlur')}>
      <option value="today">今日</option>
      <option value="seven_days">7日間</option>
      <option value="thirty_days">30日間</option>
    </DropDown>
  </Story>
</Preview>

<Source
  code={`
<DropDown aria-label="期間を選択" name="term">
  <option value="today">今日</option>
  <option value="seven_days">7日間</option>
  <option value="thirty_days">30日間</option>
</DropDown>
  `}
/>

<Source
  language='html'
  code={`
<label class="spui-DropDown-label is-active">
  <span class="spui-DropDown-visual">7日間</span>
  <span class="spui-DropDown-icon"><svg>...</svg></span>
  <select aria-label="期間を選択" class="spui-DropDown-select" name="term">
    <option value="today">今日</option>
    <option value="seven_days">7日間</option>
    <option value="thirty_days">30日間</option>
  </select>
  <span class="spui-DropDown-outline"></span>
</label>
  `}
/>

## DropDown With Selected And Disabled

<Description>select要素と同様に、selectedやdisabled属性を付与したoption要素にも対応しています。</Description>

<Preview withSource="open">
  <Story name="DropDown With Selected And Disabled">
    <DropDown aria-label="期間を選択" name="term" {...actions('onClick', 'onChange', 'onInput', 'onFocus', 'onBlur')}>
      <option value="today">今日</option>
      <option value="seven_days" selected disabled>7日間</option>
      <option value="thirty_days">30日間</option>
    </DropDown>
  </Story>
</Preview>

<Source
  code={`
<DropDown aria-label="期間を選択" name="term">
  <option value="today">今日</option>
  <option value="seven_days" selected disabled>7日間</option>
  <option value="thirty_days">30日間</option>
</DropDown>
  `}
/>

<Source
  language='html'
  code={`
<label class="spui-DropDown-label">
  <span class="spui-DropDown-visual">7日間</span>
  <span class="spui-DropDown-icon"><svg>...</svg></span>
  <select aria-label="期間を選択" class="spui-DropDown-select" name="term">
    <option value="today">今日</option>
    <option value="seven_days" selected disabled>7日間</option>
    <option value="thirty_days">30日間</option>
  </select>
  <span class="spui-DropDown-outline"></span>
</label>
  `}
/>

## DropDown With Error

<Description>エラー表示にするには`hasError`プロパティを付与してください。また、`:user-invalid`擬似クラスが付与される条件では`hasError`プロパティに関係なくエラー表示になります。</Description>

<Preview withSource="open">
  <Story name="DropDown With Error">
    <DropDown aria-label="期間を選択" hasError name="termWithError" {...actions('onClick', 'onChange', 'onInput', 'onFocus', 'onBlur')}>
      <option value="today">今日</option>
      <option value="seven_days">7日間</option>
      <option value="thirty_days">30日間</option>
    </DropDown>
  </Story>
</Preview>

<Source
  code={`
<DropDown aria-label="期間を選択" hasError name="term">
  <option value="today">今日</option>
  <option value="seven_days">7日間</option>
  <option value="thirty_days">30日間</option>
</DropDown>
  `}
/>

<Source
  language='html'
  code={`
<label class="spui-DropDown-label is-active is-error">
  <span class="spui-DropDown-visual">7日間</span>
  <span class="spui-DropDown-icon"><svg>...</svg></span>
  <select aria-label="期間を選択" class="spui-DropDown-select" name="term">
    <option value="today">今日</option>
    <option value="seven_days">7日間</option>
    <option value="thirty_days">30日間</option>
  </select>
  <span class="spui-DropDown-outline"></span>
</label>
  `}
/>

## Accessibility

<Description>aria-label属性やlabel要素で適切なラベリングをしてください。</Description>

<Source
  code={`
<DropDown aria-label="期間を選択" id="term-selection" name="term" placeholder="期間を選択">
  <option value="today">今日</option>
  <option value="seven_days">7日間</option>
  <option value="thirty_days">30日間</option>
</DropDown>
  `}
/>

<Source
  code={`
<>
  <InputLabel id="term-selection">期間を選択</InputLabel>
  <DropDown id="term-selection" name="term" placeholder="期間を選択">
    <option value="today">今日</option>
    <option value="seven_days">7日間</option>
    <option value="thirty_days">30日間</option>
  </DropDown>
</>
  `}
/>
