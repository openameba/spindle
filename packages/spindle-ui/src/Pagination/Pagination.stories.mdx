import { Description, Meta, Story, Source } from '@storybook/addon-docs/blocks';
import { actions } from '@storybook/addon-actions';
import { Pagination } from './Pagination';

# Pagination

<Meta title="Pagination" component={Pagination} />

<Source
  language="javascript"
  code={`import { Pagination } from '@openameba/spindle-ui'`}
/>

<Source
  language="css"
  code={`@import './node_modules/@openameba/spindle-ui/Pagination.css'`}
/>

<Source
  language="html"
  code={`<link rel="stylesheet" href="https://unpkg.com/@openameba/spindle-ui/Pagination.css">`}
/>

<Description>Paginationはページの移動を目的として利用します。</Description>

<Description>ページの前後に移動できます。</Description>

## 指定できるプロパティ

<Description>- `current`(必須): 現在のページ数を指定してください。</Description>
<Description>- `total`(必須): 総ページ数を指定してください。</Description>
<Description>
  - `linkFollowType`(必須): リンクのrelに設定する値を`all`, `none`, `firstPage`
  から選択できます。詳しくは[linkFollowTypeの設定](#link-follow-type-settings)を参照してください。
</Description>
<Description>
  - `createUrl`(必須):
  関数を渡すことでリンクのhrefとなる値を生成することが可能です。
</Description>
<Description>
  - `showTotal`(任意):
  現在のページ数と総ページ数を表示します。デフォルト値はfalseです。
</Description>
<Description>
  - `onPageChange`(任意): リンクをクリック後に処理をしたい場合に利用できます。
</Description>

export const url = '/detail/CURRENT.html';
export const pageNumber = 1;

## ページ総数が表示できる最大数以下の場合

<Description>
  基本的にすべてのページ番号を表示します。前後のページへ移動することができるナビゲーションが配置されます。
</Description>

### total 1

<Source
  code={
    '<Pagination total={1} current={1} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

#### current 1

<Preview withSource="open">
  <Story name="current 1 total 1">
    <Pagination
      total={1}
      current={1}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### total 2

<Source
  code={
    '<Pagination total={2} current={1} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

#### current 1

<Preview withSource="open">
  <Story name="current 1 total 2">
    <Pagination
      total={2}
      current={1}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 2

<Preview withSource="open">
  <Story name="current 2 total 2">
    <Pagination
      total={2}
      current={2}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### total 3

<Source
  code={
    '<Pagination total={3} current={1} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

#### current 1

<Preview withSource="open">
  <Story name="current 1 total 3">
    <Pagination
      total={3}
      current={1}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 2

<Preview withSource="open">
  <Story name="current 2 total 3">
    <Pagination
      total={3}
      current={2}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 3

<Preview withSource="open">
  <Story name="current 3 total 3">
    <Pagination
      total={3}
      current={3}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### total 4

<Source
  code={
    '<Pagination total={4} current={1} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

#### current 1

<Preview withSource="open">
  <Story name="current 1 total 4">
    <Pagination
      total={4}
      current={1}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 2

<Preview withSource="open">
  <Story name="current 2 total 4">
    <Pagination
      total={4}
      current={2}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 3

<Preview withSource="open">
  <Story name="current 3 total 4">
    <Pagination
      total={4}
      current={3}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 4

<Preview withSource="open">
  <Story name="current 4 total 4">
    <Pagination
      total={4}
      current={4}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### total 5

<Source
  code={
    '<Pagination total={5} current={1} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

#### current 1

<Preview withSource="open">
  <Story name="current 1 total 5">
    <Pagination
      total={5}
      current={1}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 2

<Preview withSource="open">
  <Story name="current 2 total 5">
    <Pagination
      total={5}
      current={2}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 3

<Preview withSource="open">
  <Story name="current 3 total 5">
    <Pagination
      total={5}
      current={3}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 4

<Preview withSource="open">
  <Story name="current 4 total 5">
    <Pagination
      total={5}
      current={4}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 5

<Preview withSource="open">
  <Story name="current 5 total 5">
    <Pagination
      total={5}
      current={5}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

## ページ総数が最大表示数より大きい場合

<Description>
  可能な限り現在のページ番号を中央に配置しつつ前後のページ数を含めて表示します。前後のページへ移動することができるナビゲーションが配置されます。
</Description>

### total 6

<Source
  code={
    '<Pagination total={6} current={1} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

#### current 1

<Preview withSource="open">
  <Story name="current 1 total 6">
    <Pagination
      total={6}
      current={1}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 2

<Preview withSource="open">
  <Story name="current 2 total 6">
    <Pagination
      total={6}
      current={2}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 3

<Preview withSource="open">
  <Story name="current 3 total 6">
    <Pagination
      total={6}
      current={3}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 4

<Preview withSource="open">
  <Story name="current 4 total 6">
    <Pagination
      total={6}
      current={4}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 5

<Preview withSource="open">
  <Story name="current 5 total 6">
    <Pagination
      total={6}
      current={5}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 6

<Preview withSource="open">
  <Story name="current 6 total 6">
    <Pagination
      total={6}
      current={6}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### total 7

<Source
  code={
    '<Pagination total={7} current={1} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

#### current 1

<Preview withSource="open">
  <Story name="current 1 total 7">
    <Pagination
      total={7}
      current={1}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 2

<Preview withSource="open">
  <Story name="current 2 total 7">
    <Pagination
      total={7}
      current={2}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 3

<Preview withSource="open">
  <Story name="current 3 total 7">
    <Pagination
      total={7}
      current={3}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 4

<Preview withSource="open">
  <Story name="current 4 total 7">
    <Pagination
      total={7}
      current={4}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 5

<Preview withSource="open">
  <Story name="current 5 total 7">
    <Pagination
      total={7}
      current={5}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 6

<Preview withSource="open">
  <Story name="current 6 total 7">
    <Pagination
      total={7}
      current={6}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

#### current 7

<Preview withSource="open">
  <Story name="current 7 total 7">
    <Pagination
      total={7}
      current={7}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

## ページ総数が100件を超える場合

<Description>
  可能な限り現在のページ番号を中央に配置しつつ前後のページ数を含めて表示します。最初と最後のページへ移動することができるナビゲーションが配置されます。
</Description>

<Source
  code={
    '<Pagination total={1000} current={1} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

### current 1

<Preview withSource="open">
  <Story name="current 1 total 1000">
    <Pagination
      total={1000}
      current={1}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### current 2

<Preview withSource="open">
  <Story name="current 2 total 1000">
    <Pagination
      total={1000}
      current={2}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### current 3

<Preview withSource="open">
  <Story name="current 3 total 1000">
    <Pagination
      total={1000}
      current={3}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### current 4

<Preview withSource="open">
  <Story name="current 4 total 1000">
    <Pagination
      total={1000}
      current={4}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### current 5

<Preview withSource="open">
  <Story name="current 5 total 1000">
    <Pagination
      total={1000}
      current={5}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### current 200

<Preview withSource="open">
  <Story name="current 200 total 1000">
    <Pagination
      total={1000}
      current={200}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### current 998

<Preview withSource="open">
  <Story name="current 998 total 1000">
    <Pagination
      total={1000}
      current={998}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### current 999

<Preview withSource="open">
  <Story name="current 999 total 1000">
    <Pagination
      total={1000}
      current={999}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

### current 1000

<Preview withSource="open">
  <Story name="current 1000 total 1000">
    <Pagination
      total={1000}
      current={1000}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

## ページ総数の表示

<Description>
  `showTotal`を`true`にすることで、ページ総数と現在のページ番号を表示できます。
</Description>

<Preview withSource="open">
  <Story name="showTotal props true">
    <Pagination
      total={20}
      current={8}
      linkFollowType="all"
      showTotal={true}
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

<Source
  code={
    '<Pagination total={20} current={8} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

## onPageChangeの利用

<Description>
  遷移時の処理を独自に記述したい場合はonPageChangeを利用してください。
</Description>

export const handleClick = (event, pageNumber) => {
  event.preventDefault();
};

<Preview withSource="open">
  <Story name="on page change function">
    <Pagination
      total={20}
      current={8}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      onPageChange={(event, pageNumber) => {
        handleClick(event, pageNumber);
      }}
      {...actions('onClick')}
    />
  </Story>
</Preview>

<Source
  code={
    `
  const handleClick = (event, pageNumber) => {
    event.preventDefault();
    // router.push などで遷移処理を記述
};
` +
    '<Pagination total={20} current={8} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} onPageChange={(event, pageNumber) => { handleClick(event, pageNumber); }} />' +
    `
`
  }
/>

<h2 id="link-follow-type-settings">linkFollowTypeの設定</h2>

### 全てのリンクをdofollowにする

<Description>
  linkFollowTypeをallに指定することで、全てのページ遷移リンクにrel属性が設定されません。全てのページをクロールして欲しい場合に指定します。
</Description>

<Preview withSource="open">
  <Story name="linkFollowType all">
    <Pagination
      total={7}
      current={2}
      linkFollowType="all"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

<Source
  code={
    '<Pagination total={7} current={2} linkFollowType="all" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

### 全てのリンクをnofollowにする

<Description>
  linkFollowTypeをnoneに指定することで、全てのページ遷移リンクのrel属性にnofollowが設定されます。いずれのページもクロールして欲しくない場合に指定します。
</Description>

<Preview withSource="open">
  <Story name="linkFollowType none">
    <Pagination
      total={7}
      current={2}
      linkFollowType="none"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

<Source
  code={
    '<Pagination total={7} current={2} linkFollowType="none" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>

### 1ページ目のリンク以外をnofollowにする

<Description>
  linkFollowTypeをfirstPageに指定することで、1ページ目への遷移リンク以外のrel属性にnofollowが設定されます。1ページ目のみをクロールして欲しい場合に指定します。
</Description>

<Preview withSource="open">
  <Story name="linkFollowType firstPage">
    <Pagination
      total={7}
      current={2}
      linkFollowType="firstPage"
      createUrl={(pageNumber) => `/detail/${pageNumber}.html`}
      {...actions('onClick')}
    />
  </Story>
</Preview>

<Source
  code={
    '<Pagination total={7} current={2} linkFollowType="firstPage" createUrl={(pageNumber) => `/detail/${pageNumber}.html`} />'
  }
/>
