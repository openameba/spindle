import { Description, Meta, Story, Source } from '@storybook/addon-docs/blocks';
import { DropdownMenu } from './DropdownMenu';
import {
  Text,
  TextWithIcon,
  HeadWithIcon,
  HeadWithIconAndCaption,
  Position,
} from './DropdownMenu.stories.example';

# DropdownMenu

<Meta title="DropdownMenu" component={DropdownMenu} />

<Source
  language='javascript'
  code={`
import { DropdownMenu } from '@openameba/spindle-ui';
import '@openameba/spindle-ui/DropdownMenu/DropdownMenu.css';
  `}
/>

<Source
  language='css'
  code={`@import './node_modules/@openameba/spindle-ui/DropdownMenu/DropdownMenu.css'`}
/>

<Source
  language='html'
  code={`<link rel="stylesheet" href="https://unpkg.com/@openameba/spindle-ui/DropdownMenu/DropdownMenu.css">`}
/>

## 指定できるプロパティ
### DropdownMenu.List
<Description>
  - `open`(必須): DropdownMenuの開閉状態です。DropdownMenuは`open`プロパティの値を見て開閉を行うため、`onClick`や`onClose`内で`open`プロパティを変更してください。
</Description>
<Description>
  - `triggerRef`（必須）: Triggerボタンのrefを指定してください。
</Description>
<Description>
  - `onClose`（必須）: `open`プロパティをfalseにするための処理を指定してください。
</Description>
<Description>
  - `position`（任意）: DropdownMenuをボタンに対してどの位置に開くかを指定します。デフォルトは`leftTop`で、その他にも`topLeft`, `topCenter`, `topRight`, `rightTop`, `rightCenter`, `rightBottom`, `bottomLeft`, `bottomCenter`, `bottomRight`, `leftTop`, `leftCenter`, `leftBottom`を指定することができます。
</Description>
<Description>
  - `variant`（任意）: DropdownMenuの種類を指定します。デフォルトは`text`で、その他にも`textWithIcon`, `headWithIcon`, `headWithIconAndCaption`を指定することができます。
</Description>
<Description>
  - `id`（任意）: idを指定することができます。
</Description>

### DropdownMenu.ListItem
<Description>
  - `onClick`（必須）: 各要素をクリックした際に実行したい処理を指定してください。
</Description>
<Description>
  - `icon`（任意）: DropdownMenu内にアイコンを表示したい場合は、指定することができます。
</Description>

## Text
<Description>テキストのみのDropdownMenuです</Description>

<Preview withSource="open">
  <Story name="Text">
    <Text />
  </Story>
</Preview>

<Source
  code={`
const [open, setOpen] = useState(false);
const triggerRef = useRef<HTMLButtonElement>(null);
const onClick = () => {
  setOpen((prevOpen) => !prevOpen);
};
const onClose = () => {
  setOpen(false);
};
return (
  <>
    <DropdownMenu.Frame>
      <Button
        aria-controls="dropdown-menu-example1"
        aria-expanded={open}
        onClick={onClick}
        ref={triggerRef}
        size="medium"
        variant="neutral"
      >
        開く
      </Button>
      <DropdownMenu.List
        id="dropdown-menu-example1"
        onClose={onClose}
        open={open}
        position="rightTop"
        triggerRef={triggerRef}
        variant="text"
      >
        <DropdownMenu.ListItem {...actions('onClick')}>
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
        <DropdownMenu.ListItem {...actions('onClick')}>
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
      </DropdownMenu.List>
    </DropdownMenu.Frame>
  </>
);
  `}
/>

## Text With Icon（1line 44px）
<Description>各アイテムの高さが44pxのアイコン付きDropdownMenuです</Description>

<Preview withSource="open">
  <Story name="Text With Icon">
    <TextWithIcon />
  </Story>
</Preview>

<Source
  code={`
const [open, setOpen] = useState(false);
const triggerRef = useRef<HTMLButtonElement>(null);
const onClick = () => {
  setOpen((prevOpen) => !prevOpen);
};
const onClose = () => {
  setOpen(false);
};
return (
  <>
    <DropdownMenu.Frame>
      <Button
        aria-controls="dropdown-menu-example2"
        aria-expanded={open}
        onClick={onClick}
        ref={triggerRef}
        size="medium"
        variant="neutral"
      >
        開く
      </Button>
      <DropdownMenu.List
        id="dropdown-menu-example2"
        onClose={onClose}
        open={open}
        position="rightTop"
        triggerRef={triggerRef}
        variant="textWithIcon"
      >
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
      </DropdownMenu.List>
    </DropdownMenu.Frame>
  </>
);
  `}
/>

## Head With Icon（1line 56px）
<Description>各アイテムの高さが56pxのアイコン付きDropdownMenuです</Description>

<Preview withSource="open">
  <Story name="Head With Icon">
    <HeadWithIcon />
  </Story>
</Preview>

<Source
  code={`
const [open, setOpen] = useState(false);
const triggerRef = useRef<HTMLButtonElement>(null);
const onClick = () => {
  setOpen((prevOpen) => !prevOpen);
};
const onClose = () => {
  setOpen(false);
};
return (
  <>
    <DropdownMenu.Frame>
      <Button
        aria-controls="dropdown-menu-example3"
        aria-expanded={open}
        onClick={onClick}
        ref={triggerRef}
        size="medium"
        variant="neutral"
      >
        開く
      </Button>
      <DropdownMenu.List
        id="dropdown-menu-example3"
        onClose={onClose}
        open={open}
        position="rightTop"
        triggerRef={triggerRef}
        variant="headWithIcon"
      >
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
      </DropdownMenu.List>
    </DropdownMenu.Frame>
  </>
);
  `}
/>

## Head With Icon And Caption
<Description>アイコンとキャプション付きDropdownMenuです</Description>

<Preview withSource="open">
  <Story name="Head With Icon And Caption">
    <HeadWithIconAndCaption />
  </Story>
</Preview>

<Source
  code={`
const [open, setOpen] = useState(false);
const triggerRef = useRef<HTMLButtonElement>(null);
const onClick = () => {
  setOpen((prevOpen) => !prevOpen);
};
const onClose = () => {
  setOpen(false);
};
return (
  <>
    <DropdownMenu.Frame>
      <Button
        aria-controls="dropdown-menu-example4"
        aria-expanded={open}
        onClick={onClick}
        ref={triggerRef}
        size="medium"
        variant="neutral"
      >
        開く
      </Button>
      <DropdownMenu.List
        id="dropdown-menu-example4"
        onClose={onClose}
        open={open}
        position="rightTop"
        triggerRef={triggerRef}
        variant="headWithIconAndCaption"
      >
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
          <DropdownMenu.Caption>キャプションですよ</DropdownMenu.Caption>
        </DropdownMenu.ListItem>
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
          <DropdownMenu.Caption>キャプションですよ</DropdownMenu.Caption>
        </DropdownMenu.ListItem>
      </DropdownMenu.List>
    </DropdownMenu.Frame>
  </>
);
  `}
/>

## Position
<Description>positionプロパティのバリエーション確認用です</Description>
<Description>デフォルトはleftTopで、その他にもtopLeft, topCenter, topRight, rightTop, rightCenter, rightBottom, bottomLeft, bottomCenter, bottomRight, leftTop, leftCenter, leftBottomを指定できます</Description>

<Preview withSource="open">
  <Story name="Position">
    <Position />
  </Story>
</Preview>
